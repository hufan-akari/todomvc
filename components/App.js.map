{"version":3,"file":"App.js","sourceRoot":"","sources":["../../src/components/App.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as _React from \"react\";\ndeclare const React: typeof _React;\n\nimport { ITodoModel, ITodo } from \"../models/todoModel.js\";\nimport { Header } from \"./Header.js\";\nimport { TodoItem } from \"./TodoItem.js\";\nimport { Footer } from \"./Footer.js\";\n\ninterface IAppState {\n\tediting?: number;\n\tnowShowing: Showing;\n}\n\nexport const enum Showing {\n\tALL_TODOS = \"all\",\n\tACTIVE_TODOS = \"active\",\n\tCOMPLETED_TODOS = \"completed\"\n}\n\ninterface IAppProps {\n\tmodel: ITodoModel;\n}\n\nexport class TodoApp extends React.Component<IAppProps, IAppState> {\n\tconstructor(props: IAppProps) {\n\t\tsuper(props);\n\t\tthis.props.model.subscribe(this.setState.bind(this, {}));\n\t}\n\n\tpublic state: IAppState = {\n\t\tnowShowing: Showing.ALL_TODOS\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\n\t\t\t\"hashchange\",\n\t\t\t() => {\n\t\t\t\tswitch (location.hash) {\n\t\t\t\t\tcase \"#/active\":\n\t\t\t\t\t\tthis.setState({ nowShowing: Showing.ACTIVE_TODOS });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"#/completed\":\n\t\t\t\t\t\tthis.setState({ nowShowing: Showing.COMPLETED_TODOS });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"#/\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.setState({ nowShowing: Showing.ALL_TODOS });\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ passive: true }\n\t\t);\n\t}\n\n\tadd = (event: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (event.key !== \"Enter\") {\n\t\t\treturn;\n\t\t}\n\t\tevent.preventDefault();\n\t\tconst input = event.target as HTMLInputElement;\n\t\tconst value = input.value.trim();\n\t\tif (value.length > 0) {\n\t\t\tthis.props.model.addTodo(value);\n\t\t\tinput.value = \"\";\n\t\t}\n\t};\n\n\ttoggleAll = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst checked = event.target.checked;\n\t\tthis.props.model.toggleAll(checked);\n\t};\n\n\ttoggle = (todoToToggle: ITodo) => {\n\t\tthis.props.model.toggle(todoToToggle);\n\t};\n\n\tdestroy = (todo: ITodo) => {\n\t\tthis.props.model.destroy(todo);\n\t};\n\n\tedit = (todo: ITodo) => {\n\t\tthis.setState({ editing: todo.id });\n\t};\n\n\tsave = (todoToSave: ITodo, text: string) => {\n\t\tthis.props.model.save(todoToSave, text);\n\t\tthis.setState({ editing: undefined });\n\t};\n\n\tcancel = () => {\n\t\tthis.setState({ editing: undefined });\n\t};\n\n\tclearCompleted = () => {\n\t\tthis.props.model.clearCompleted();\n\t};\n\n\tget shownTodos() {\n\t\treturn this.props.model.todos.filter(todo => {\n\t\t\tswitch (this.state.nowShowing) {\n\t\t\t\tcase Showing.ACTIVE_TODOS:\n\t\t\t\t\treturn !todo.completed;\n\t\t\t\tcase Showing.COMPLETED_TODOS:\n\t\t\t\t\treturn todo.completed;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\n\tget TodoList() {\n\t\treturn (\n\t\t\t<ul className=\"todo-list\">\n\t\t\t\t{this.shownTodos.map(todo => (\n\t\t\t\t\t<TodoItem\n\t\t\t\t\t\tkey={todo.id}\n\t\t\t\t\t\ttodo={todo}\n\t\t\t\t\t\tediting={this.state.editing == todo.id}\n\t\t\t\t\t\tonToggle={this.toggle.bind(this, todo)}\n\t\t\t\t\t\tonDestroy={this.destroy.bind(this, todo)}\n\t\t\t\t\t\tonEdit={this.edit.bind(this, todo)}\n\t\t\t\t\t\tonSave={this.save.bind(this, todo)}\n\t\t\t\t\t\tonCancel={this.cancel}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t);\n\t}\n\n\tget Main() {\n\t\treturn (\n\t\t\t<section className=\"main\" key=\"Main\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"toggle-all\"\n\t\t\t\t\tclassName=\"toggle-all\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tchecked={this.activeTodoCount === 0}\n\t\t\t\t\tonChange={this.toggleAll}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"toggle-all\">Mark all as complete</label>\n\t\t\t\t{this.TodoList}\n\t\t\t</section>\n\t\t);\n\t}\n\n\tget activeTodoCount() {\n\t\treturn this.props.model.todos.reduce(function(accum, todo) {\n\t\t\treturn todo.completed ? accum : accum + 1;\n\t\t}, 0);\n\t}\n\n\tget hasCompCompleted() {\n\t\treturn this.props.model.todos.some(todo => todo.completed);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header key=\"Header\" onAddTodo={this.add} />\n\t\t\t\t{this.props.model.todos.length > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{this.Main}\n\t\t\t\t\t\t{Footer({\n\t\t\t\t\t\t\tactiveTodoCount: this.activeTodoCount,\n\t\t\t\t\t\t\thasCompCompleted: this.hasCompCompleted,\n\t\t\t\t\t\t\tonClearCompleted: this.clearCompleted,\n\t\t\t\t\t\t\tnowShowing: this.state.nowShowing\n\t\t\t\t\t\t})}\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\tfalse\n\t\t\t\t)}\n\t\t\t</>\n\t\t);\n\t}\n}\n"]}