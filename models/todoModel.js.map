{"version":3,"file":"todoModel.js","sourceRoot":"","sources":["../../src/models/todoModel.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,YAAY,CAAC;AAsBnC,MAAM,OAAO,SAAS;IAKrB,YAAY,GAAW;QACtB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACrB,CAAC;IAEM,SAAS,CAAC,QAAa;QAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAEM,MAAM;QACZ,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE;YAC3B,EAAE,EAAE,CAAC;QACN,CAAC,CAAC,CAAC;IACJ,CAAC;IAEM,OAAO,CAAC,KAAa;QAC3B,IAAI,CAAC,KAAK,GAAG;YACZ,GAAG,IAAI,CAAC,KAAK;YACb;gBACC,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE;gBACd,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,KAAK;aAChB;SACD,CAAC;QAEF,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAEM,SAAS,CAAC,OAAgB;QAChC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAQ,CAAC,IAAW,EAAE,EAAE;YAClD,OAAO,EAAE,GAAG,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAEM,MAAM,CAAC,YAAmB;QAChC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAQ,CAAC,IAAW,EAAE,EAAE;YAClD,OAAO,IAAI,KAAK,YAAY;gBAC3B,CAAC,CAAC,IAAI;gBACN,CAAC,CAAC,EAAE,GAAG,IAAI,EAAE,SAAS,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAEM,OAAO,CAAC,IAAW;QACzB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC;QAEhE,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAEM,IAAI,CAAC,UAAiB,EAAE,IAAY;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAClC,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAEM,cAAc;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAExD,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;CACD","sourcesContent":["import { store } from \"./store.js\";\n\nexport interface ITodo {\n\tid: number;\n\ttitle: string;\n\tcompleted: boolean;\n}\n\nexport interface ITodoModel {\n\tkey: any;\n\ttodos: Array<ITodo>;\n\tonChanges: Array<any>;\n\tsubscribe(onChange: any): void;\n\tinform(): void;\n\taddTodo(title: string): void;\n\ttoggleAll(checked: boolean): void;\n\ttoggle(todoToToggle: ITodo): void;\n\tdestroy(todo: ITodo): void;\n\tsave(todoToSave: ITodo, text: string): void;\n\tclearCompleted(): void;\n}\n\nexport class TodoModel implements ITodoModel {\n\tpublic key: string;\n\tpublic todos: Array<ITodo>;\n\tpublic onChanges: Array<any>;\n\n\tconstructor(key: string) {\n\t\tthis.key = key;\n\t\tthis.todos = store(key);\n\t\tthis.onChanges = [];\n\t}\n\n\tpublic subscribe(onChange: any) {\n\t\tthis.onChanges.push(onChange);\n\t}\n\n\tpublic inform() {\n\t\tstore(this.key, this.todos);\n\t\tthis.onChanges.forEach(cb => {\n\t\t\tcb();\n\t\t});\n\t}\n\n\tpublic addTodo(title: string) {\n\t\tthis.todos = [\n\t\t\t...this.todos,\n\t\t\t{\n\t\t\t\tid: Date.now(),\n\t\t\t\ttitle: title,\n\t\t\t\tcompleted: false\n\t\t\t}\n\t\t];\n\n\t\tthis.inform();\n\t}\n\n\tpublic toggleAll(checked: boolean) {\n\t\tthis.todos = this.todos.map<ITodo>((todo: ITodo) => {\n\t\t\treturn { ...todo, completed: checked };\n\t\t});\n\n\t\tthis.inform();\n\t}\n\n\tpublic toggle(todoToToggle: ITodo) {\n\t\tthis.todos = this.todos.map<ITodo>((todo: ITodo) => {\n\t\t\treturn todo !== todoToToggle\n\t\t\t\t? todo\n\t\t\t\t: { ...todo, completed: !todo.completed };\n\t\t});\n\n\t\tthis.inform();\n\t}\n\n\tpublic destroy(todo: ITodo) {\n\t\tthis.todos = this.todos.filter(candidate => candidate !== todo);\n\n\t\tthis.inform();\n\t}\n\n\tpublic save(todoToSave: ITodo, text: string) {\n\t\tthis.todos = this.todos.map(todo => {\n\t\t\treturn todo !== todoToSave ? todo : { ...todo, title: text };\n\t\t});\n\n\t\tthis.inform();\n\t}\n\n\tpublic clearCompleted() {\n\t\tthis.todos = this.todos.filter(todo => !todo.completed);\n\n\t\tthis.inform();\n\t}\n}\n"]}